(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{39:function(e,t,n){},61:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(15),c=n.n(o),s=n(19),i=n.n(s),r=n(30),l=n(10),u=(n(39),n(4)),d=n(11),m=n.n(d),h="GET_DATA",p="FILTER_DATA_TYPE",j="COMMENTS_DATA_TYPE",f="IS_LOADING_TYPE",b="IS_UPDATE_TYPE",g=function(e){return{type:f,payload:e}},O=localStorage.getItem("myId"),v=function(e){return{type:h,payload:e}},I=function(){return function(e){e(g(!0));var t=m.a.get("https://test-api-node1.herokuapp.com/users");t.then((function(t){for(var n=0;n<t.data.length;n++)delete t.data[n].Password;var a;e((a=function(e){return[e.find((function(e){return e._id===O}))]}(t.data),{type:p,payload:a})),e(v(t.data)),e(g(!1))})),t.catch((function(e){throw e}))}},x=function(e){return{type:j,payload:e}},_=n.p+"static/media/Gear-0.2s-200px.b8fbe4a5.gif",S=function(e){return{type:b,payload:e}},C=(n(61),n(1)),N=function(e){var t=e.inputState,n=e.handleInputChange,a=e.handleSubmitInput,o=e.handleFileChange,c=Object(u.b)(),s=Object(u.c)((function(e){return e.IS_UPDATE_REDUCER}));return Object(C.jsx)("div",{class:"form_wrapper",children:Object(C.jsxs)("form",{className:"form_form",onSubmit:a,children:[Object(C.jsx)("h1",{className:"form_text",children:"Post"}),!1===s?Object(C.jsx)("input",{type:"file",className:"form_input_file",placeholder:"Choose Image",onChange:o}):"",Object(C.jsx)("input",{className:"form_input",type:"text",placeholder:"Post",value:t,onChange:n}),Object(C.jsx)("button",{className:"form_submit",onClick:a,children:"Submit"}),!0===s?Object(C.jsx)("button",{onClick:function(){c(S(!1))},className:"form_cancel",children:"Cancel"}):""]})})},y=(n(63),function(e){var t=e.commentInput,n=e.handleCommentChange,a=e.handleCommentSubmit,o=e.handleDeleteComment,c=e.postId,s=localStorage.getItem("myId"),i=Object(u.c)((function(e){return e.GET_COMMENTS_REDUCER})),r=function(e,t){if(e===s)return Object(C.jsx)("button",{onClick:o.bind(undefined,t,c),className:"comment_delete",children:"Delete"})};return Object(C.jsx)("div",{className:"comment_wrapper",children:Object(C.jsxs)("div",{className:"comment_box",children:[Object(C.jsx)("div",{className:"comment_comments",children:Object(C.jsx)("ul",{children:i.map((function(e,t){return Object(C.jsxs)("li",{className:"comment_list",children:[r(e.belongsTo,e._id),Object(C.jsx)("h4",{className:"comment_name",children:e.name}),Object(C.jsx)("p",{className:"comment_text",children:e.text})]},t)}))})}),Object(C.jsx)("div",{className:"comment_form",children:Object(C.jsxs)("form",{children:[Object(C.jsx)("input",{type:"text",placeholder:"Type Comment Here",value:t,onChange:n}),Object(C.jsx)("button",{onClick:a,className:"comment_submit",children:"Comment"})]})})]})})}),U=(n(64),void 0),w=function(e){var t=e.handleLikes,n=e.handleRemovePost,o=e.getPostId,c=e.postId,s=e.handleFilter,i=e.handleUpdatePost,r=e.commentInput,d=e.handleCommentChange,m=e.handleCommentSubmit,h=e.handleDeleteComment,p=Object(u.b)(),j=localStorage.getItem("myId"),f=Object(u.c)((function(e){return e.GET_DATA_REDUCER})),b=Object(a.useState)(""),g=Object(l.a)(b,2),O=g[0],v=g[1],I=function(e,n,a){var o;return o=void 0!==e.find((function(e){return e===j}))?"UnLike":"Like",Object(C.jsxs)("button",{onClick:t.bind(U,n,a),className:"list_postLike",children:[o," ",e.length]})},_=function(e){if(e.belongsTo===j)return Object(C.jsx)("button",{onClick:i.bind(U,e),className:"list_removePost",children:"Update"})},S=function(e){if(e.belongsTo===j)return Object(C.jsx)("button",{onClick:n.bind(U,e._id,e.cloudinaryId),className:"list_removePost",children:"Delete"})},N=function(e){o(e._id),v(e._id),0!==e.comments.length?p(x(e.comments)):p(x([]))},w=function(e){if(e._id===O)return Object(C.jsx)(y,{handleCommentChange:d,handleCommentSubmit:m,handleDeleteComment:h,postId:c,commentInput:r})};return Object(C.jsxs)("div",{className:"list_wrapper",children:[Object(C.jsx)("div",{className:"list_filter",children:Object(C.jsxs)("select",{onChange:s,children:[Object(C.jsx)("option",{value:"allPost",children:"All Post"}),Object(C.jsx)("option",{value:"yourPost",children:"Your Post"})]})}),Object(C.jsx)("ul",{className:"list_ul",children:f.map((function(e,t){return e.Post.map((function(t){return Object(C.jsx)("li",{className:"list_li",children:Object(C.jsxs)("div",{className:"list_item",children:[S(t),_(t),Object(C.jsx)("h3",{className:"list_postName",children:e.Username}),"none"!==t.postImg?Object(C.jsx)("img",{className:"list_image",src:t.postImg}):"",Object(C.jsx)("p",{className:"list_postText",children:t.text}),I(t.likes,t,e),Object(C.jsxs)("p",{onClick:N.bind(U,t),className:"list_commentLabel",children:["Comments ",t.comments.length]}),w(t)]})},t._id)}))}))})]})},k=(n(65),function(e){var t=e.handleSignIn,n=e.handleUserChange,a=e.handlePasswordChange,o=e.submitSignIn,c=e.user,s=e.password;return Object(C.jsx)("div",{children:Object(C.jsxs)("form",{className:"signIn_form",children:[Object(C.jsx)("h2",{className:"signIn_text",children:"Sign In"}),Object(C.jsx)("input",{className:"signIn_userInput",onChange:n,value:c,type:"text",placeholder:"Username"}),Object(C.jsx)("input",{className:"signIn_passwordInput",onChange:a,value:s,type:"password",placeholder:"Password"}),Object(C.jsx)("button",{onClick:o,className:"signIn_submit",children:"Submit"}),Object(C.jsx)("a",{onClick:t,className:"signIn_signUpLabel",children:"SignUp"})]})})}),E=(n(66),function(e){var t=e.handleSignUp,n=e.handleUserChange,a=e.handlePasswordChange,o=e.submitSignUp,c=e.user,s=e.password;return Object(C.jsx)("div",{children:Object(C.jsxs)("form",{className:"signUp_form",children:[Object(C.jsx)("h2",{className:"signUp_text",children:"Sign Up"}),Object(C.jsx)("input",{className:"signUp_userInput",value:c,onChange:n,type:"text",placeholder:"Username"}),Object(C.jsx)("input",{className:"signUp_passwordInput",value:s,onChange:a,type:"password",placeholder:"Password"}),Object(C.jsx)("button",{onClick:o,className:"signUp_submit",children:"Submit"}),Object(C.jsx)("a",{onClick:t,className:"signUp_signUpLabel",children:"SignIn"})]})})}),D=n(31),P=n(3);var T=function(){var e=localStorage.getItem("myId"),t=localStorage.getItem("myName"),n=localStorage.getItem("isLogIn"),o=Object(u.c)((function(e){return e.FILTER_DATA_REDUCER})),c=Object(u.c)((function(e){return e.IS_LOADING_REDUCER})),s=Object(u.c)((function(e){return e.IS_UPDATE_REDUCER})),d=Object(u.b)(),h=Object(a.useState)(""),p=Object(l.a)(h,2),j=p[0],f=p[1],b=Object(a.useState)(""),g=Object(l.a)(b,2),O=g[0],y=g[1],U=Object(a.useState)(!1),T=Object(l.a)(U,2),R=T[0],L=T[1],A=Object(a.useState)(!0),F=Object(l.a)(A,2),G=F[0],M=F[1],B=Object(a.useState)(""),z=Object(l.a)(B,2),Y=z[0],J=z[1],H=Object(a.useState)(""),W=Object(l.a)(H,2),q=W[0],K=W[1],Q=Object(a.useState)(""),V=Object(l.a)(Q,2),X=V[0],Z=V[1],$=Object(a.useState)(),ee=Object(l.a)($,2),te=ee[0],ne=ee[1];Object(a.useEffect)((function(){d(I())}),[]);var ae=function(){return localStorage.getItem("token")},oe=function(e,t){var n={Username:Y.toLocaleLowerCase(),Password:q.toLocaleLowerCase()},a=m.a.post(e,n);a.then((function(n){var a,o,c=n.data,s=c.Token,i=c.Status,r=c.myUsername;!function(e){localStorage.setItem("token",e)}(s),function(e,t){-1!==e.indexOf("signIn")&&"Successful"===t?localStorage.setItem("isLogIn",!0):localStorage.setItem("isLogIn",!1)}(e,i),a=c.myId,localStorage.setItem("myId",a),o=r,localStorage.setItem("myName",o),function(e,t){var n=function(e,n,a){setTimeout((function(){L(n),M(e)}),1e3),setTimeout((function(){alert("".concat(t," ").concat(a))}),1500)};"Sign In"===t&&"Successful"===e?(L(!1),location.href="https://vjmumar.github.io/mern-frontend/#/home"):"Sign Up"===t&&"Successful"===e?n(!1,!1,"Successfully Please Sign In Now!"):"Sign In"===t&&"User Not Found"===e||"Failed"===e?n(!0,!1,e):"Sign Up"===t&&"Failed"===e&&n(!1,!1,"Failed Username is Taken")}(i,t)})),a.catch((function(e){throw e}))},ce=function(){var t=Object(r.a)(i.a.mark((function t(n,a){var o,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o={postId:n,likeId:e},(c=m.a.post(a,o,{headers:{authorization:"Bearer ".concat(ae())}})).then((function(){d(I())})),c.catch((function(e){throw e}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),se=function(){return!0===G&&!1===R?Object(C.jsx)(k,{handleSignIn:le,handleUserChange:ie,handlePasswordChange:re,submitSignIn:ue,user:Y,password:q}):!1===G&&!1===R?Object(C.jsx)(E,{handleSignUp:me,handleUserChange:ie,handlePasswordChange:re,submitSignUp:de,user:Y,password:q}):!0===R?Object(C.jsx)("img",{className:"gear",src:_}):void 0},ie=function(e){var t=e.target.value;J(t)},re=function(e){var t=e.target.value;K(t)},le=function(e){e.preventDefault(),M(!1),se()},ue=function(e){e.preventDefault();oe("https://test-api-node1.herokuapp.com/users/signIn","Sign In"),L(!0),M(!0)},de=function(e){e.preventDefault();Y.length<4?alert("Minimum UserName Length is 4"):-1!==Y.indexOf(" ")?alert("Please Remove Spaces from your Username"):(oe("https://test-api-node1.herokuapp.com/users/signUp","Sign Up"),L(!0),M(!1))},me=function(e){e.preventDefault(),M(!0),se()},he=function(){localStorage.removeItem("isLogIn"),localStorage.removeItem("myId"),localStorage.removeItem("token"),localStorage.removeItem("myName"),location.reload()};return Object(C.jsx)(D.a,{children:Object(C.jsx)("div",{className:"App",children:Object(C.jsxs)(P.d,{children:[Object(C.jsx)(P.b,{exact:!0,path:"/",children:Object(C.jsx)("div",{className:"logIn_wrapper",children:se()})}),Object(C.jsx)(P.b,{exact:!0,path:"/home",children:"true"===n?Object(C.jsxs)("div",{className:"home_wrapper",children:[Object(C.jsxs)("div",{className:"userDetails",children:[Object(C.jsx)("h1",{className:"username",children:t}),Object(C.jsx)("button",{onClick:function(){he()},className:"logOut",children:"Log Out"})]}),Object(C.jsx)(N,{handleInputChange:function(e){var t=e.target.value;y(t)},handleSubmitInput:function(t){t.preventDefault(),ne(""),y(""),!0===s?function(){var e={postId:j,text:O},t=m.a.post("https://test-api-node1.herokuapp.com/post/update",e,{headers:{authorization:"Bearer ".concat(ae())}});t.then((function(){d(I()),d(S(!1))})),t.catch((function(e){throw e}))}():function(){var t=new FormData;t.append("images",te),t.append("text",O),t.append("userId",e);var n=m.a.post("https://test-api-node1.herokuapp.com/post",t,{headers:{authorization:"Bearer ".concat(ae())}});n.then((function(e){d(I()),console.log(e)})),n.catch((function(e){alert("File Not Supported or File Is Too Big!")}))}()},handleFileChange:function(e){var t=e.target.files[0];ne(t)},inputState:O}),Object(C.jsx)("div",{style:{display:!0===c?"none":"block",width:"100%"},children:Object(C.jsx)(w,{handleLikes:function(t){!function(t){var n=t.likes.find((function(t){return t===e})),a=t._id;ce(a,n?"https://test-api-node1.herokuapp.com/post/likes/dec":"https://test-api-node1.herokuapp.com/post/likes")}(t)},handleRemovePost:function(e,t){!function(e,t){var n={postId:e,cloudinaryId:t},a=m.a.post("https://test-api-node1.herokuapp.com/post/del",n,{headers:{authorization:"Bearer ".concat(ae())}});a.then((function(){d(I())})),a.catch((function(e){throw e}))}(e,t)},handleCommentChange:function(e){Z(e.target.value)},handleCommentSubmit:function(e){e.preventDefault(),function(){var e={name:t,postId:j,comment:X},n=m.a.post("https://test-api-node1.herokuapp.com/post/comments",e,{headers:{authorization:"Bearer ".concat(ae())}});n.then((function(e){d(I()),e.data.addComment.Post.map((function(e){e._id===j&&d(x(e.comments))}))})),n.catch((function(e){throw e}))}()},getPostId:function(e){f(e)},handleDeleteComment:function(e,t){!function(e,t){var n={postId:t,commentId:e},a=m.a.post("https://test-api-node1.herokuapp.com/post/comments/del",n);a.then((function(e){d(I()),delete e.data.findRemoveComment.Password,e.data.findRemoveComment.Post.map((function(e){e._id===t&&d(x(e.comments))}))})),a.catch((function(e){throw e}))}(e,t)},handleFilter:function(e){var t=e.target.value;d("yourPost"===t?v(o):I())},handleUpdatePost:function(e){y(e.text),f(e._id),d(S(!0))},postId:j,commentInput:X})}),Object(C.jsx)("img",{style:{display:!1===c?"none":"block",margin:"auto"},src:_})]}):Object(C.jsx)(P.a,{to:"/"})})]})})})},R=n(13),L=Object(R.combineReducers)({GET_DATA_REDUCER:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return t.payload;default:return e}},FILTER_DATA_REDUCER:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return t.payload;default:return e}},GET_COMMENTS_REDUCER:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return t.payload;default:return e}},IS_LOADING_REDUCER:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return t.payload;default:return e}},IS_UPDATE_REDUCER:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return t.payload;default:return e}}}),A=n(32),F=n(33),G=Object(R.createStore)(L,Object(A.composeWithDevTools)(Object(R.applyMiddleware)(F.a)));c.a.render(Object(C.jsx)(u.a,{store:G,children:Object(C.jsx)(T,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.0da3b77c.chunk.js.map