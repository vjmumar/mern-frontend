(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(29),o=n.n(c),i=n(16),r=n.n(i),l=n(30),u=n(19),m=n(7),d=(n(38),n.p+"static/media/Gear-0.2s-200px.b8fbe4a5.gif"),h=(n(39),n(0)),p=function(e){var t=e.inputState,n=e.handleInputChange,a=e.handleSubmitInput;return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{className:"form_form",onSubmit:a,children:[Object(h.jsx)("h1",{className:"form_text",children:"Post"}),Object(h.jsx)("input",{className:"form_input",type:"text",placeholder:"Post",value:t,onChange:n}),Object(h.jsx)("button",{className:"form_submit",onClick:a,children:"Submit"})]})})},j=(n(41),function(e){var t=e.commentInput,n=e.handleCommentChange,a=e.commentsArray,s=e.handleCommentSubmit,c=e.handleDeleteComment,o=e.postId,i=localStorage.getItem("myId"),r=function(e,t){if(e===i)return Object(h.jsx)("button",{onClick:c.bind(undefined,t,o),className:"comment_delete",children:"Delete"})};return Object(h.jsx)("div",{className:"comment_wrapper",children:Object(h.jsxs)("div",{className:"comment_box",children:[Object(h.jsx)("div",{className:"comment_comments",children:Object(h.jsx)("ul",{children:a.map((function(e,t){return Object(h.jsxs)("li",{className:"comment_list",children:[r(e.belongsTo,e._id),Object(h.jsx)("h4",{className:"comment_name",children:e.name}),Object(h.jsx)("p",{className:"comment_text",children:e.text})]},t)}))})}),Object(h.jsx)("div",{className:"comment_form",children:Object(h.jsxs)("form",{children:[Object(h.jsx)("input",{type:"text",placeholder:"Type Comment Here",value:t,onChange:n}),Object(h.jsx)("button",{onClick:s,className:"comment_submit",children:"Comment"})]})})]})})}),b=(n(42),void 0),f=function(e){var t=e.data,n=e.handleLikes,s=e.handleRemovePost,c=e.getPostId,o=e.postId,i=e.handleFilter,r=e.commentInput,l=e.handleCommentChange,u=e.handleCommentSubmit,d=e.handleDeleteComment,p=localStorage.getItem("myId"),f=Object(a.useState)(""),g=Object(m.a)(f,2),O=g[0],x=g[1],v=Object(a.useState)([]),I=Object(m.a)(v,2),S=I[0],C=I[1],N=function(e,t,a){var s;return s=void 0!==e.find((function(e){return e===p}))?"UnLike":"Like",Object(h.jsxs)("button",{onClick:n.bind(b,t,a),className:"list_postLike",children:[s," ",e.length]})},_=function(e){if(e.belongsTo===p)return Object(h.jsx)("button",{onClick:s.bind(b,e._id),className:"list_removePost",children:"Delete"})},k=function(e){c(e._id),x(e._id),C(S.splice(0,S.length)),C(S.concat(e.comments))},w=function(e){if(e._id===O)return Object(h.jsx)(j,{handleCommentChange:l,handleCommentSubmit:u,handleDeleteComment:d,postId:o,commentInput:r,commentsArray:S})};return Object(h.jsxs)("div",{className:"list_wrapper",children:[Object(h.jsx)("div",{className:"list_filter",children:Object(h.jsxs)("select",{onChange:i,children:[Object(h.jsx)("option",{value:"allPost",children:"All Post"}),Object(h.jsx)("option",{value:"yourPost",children:"Your Post"})]})}),Object(h.jsx)("ul",{className:"list_ul",children:t.map((function(e,t){return e.map((function(e){return e.Post.map((function(t){return Object(h.jsx)("li",{className:"list_li",children:Object(h.jsxs)("div",{className:"list_item",children:[_(t),Object(h.jsx)("h3",{className:"list_postName",children:e.Username}),Object(h.jsx)("p",{className:"list_postText",children:t.text}),N(t.likes,t,e),Object(h.jsx)("p",{onClick:k.bind(b,t),className:"list_commentLabel",children:"Comments"}),w(t)]})},t._id)}))}))}))})]})},g=(n(43),function(e){var t=e.handleSignIn,n=e.handleUserChange,a=e.handlePasswordChange,s=e.submitSignIn,c=e.user,o=e.password;return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{className:"signIn_form",children:[Object(h.jsx)("h2",{className:"signIn_text",children:"Sign In"}),Object(h.jsx)("input",{className:"signIn_userInput",onChange:n,value:c,type:"text",placeholder:"Username"}),Object(h.jsx)("input",{className:"signIn_passwordInput",onChange:a,value:o,type:"password",placeholder:"Password"}),Object(h.jsx)("button",{onClick:s,className:"signIn_submit",children:"Submit"}),Object(h.jsx)("a",{onClick:t,className:"signIn_signUpLabel",children:"SignUp"})]})})}),O=(n(44),function(e){var t=e.handleSignUp,n=e.handleUserChange,a=e.handlePasswordChange,s=e.submitSignUp,c=e.user,o=e.password;return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{className:"signUp_form",children:[Object(h.jsx)("h2",{className:"signUp_text",children:"Sign Up"}),Object(h.jsx)("input",{className:"signUp_userInput",value:c,onChange:n,type:"text",placeholder:"Username"}),Object(h.jsx)("input",{className:"signUp_passwordInput",value:o,onChange:a,type:"password",placeholder:"Password"}),Object(h.jsx)("button",{onClick:s,className:"signUp_submit",children:"Submit"}),Object(h.jsx)("a",{onClick:t,className:"signUp_signUpLabel",children:"SignIn"})]})})}),x=n(31),v=n(2),I=n(9),S=n.n(I);var C=function(){var e=localStorage.getItem("isLogIn"),t=Object(a.useState)(""),n=Object(m.a)(t,2),s=n[0],c=n[1],o=Object(a.useState)(""),i=Object(m.a)(o,2),j=i[0],b=i[1],I=Object(a.useState)([]),C=Object(m.a)(I,2),N=C[0],_=C[1],k=Object(a.useState)(!1),w=Object(m.a)(k,2),U=w[0],y=w[1],P=Object(a.useState)(!0),L=Object(m.a)(P,2),D=L[0],T=L[1],B=Object(a.useState)(""),F=Object(m.a)(B,2),z=F[0],A=F[1],E=Object(a.useState)(""),J=Object(m.a)(E,2),R=J[0],G=J[1],H=Object(a.useState)(""),M=Object(m.a)(H,2),Y=M[0],q=M[1],K=localStorage.getItem("myId"),Q=localStorage.getItem("myName");Object(a.useEffect)((function(){V()}),[]);var V=function(){var e=S.a.get("https://test-api-node1.herokuapp.com/users");e.then((function(e){var t=Object(u.a)(N);t.push(e.data),_(t)})),e.catch((function(e){throw e}))},W=function(){location.reload()},X=function(){return localStorage.getItem("token")},Z=function(e,t){var n={Username:z.toLocaleLowerCase(),Password:R.toLocaleLowerCase()},a=S.a.post(e,n);a.then((function(n){var a,s,c=n.data,o=c.Token,i=c.Status,r=c.myUsername;!function(e){localStorage.setItem("token",e)}(o),function(e,t){-1!==e.indexOf("signIn")&&"Successful"===t?localStorage.setItem("isLogIn",!0):localStorage.setItem("isLogIn",!1)}(e,i),a=c.myId,localStorage.setItem("myId",a),s=r,localStorage.setItem("myName",s),function(e,t){var n=function(e,n,a){setTimeout((function(){y(n),T(e)}),1e3),setTimeout((function(){alert("".concat(t," ").concat(a))}),1500)};"Sign In"===t&&"Successful"===e?(y(!1),location.href="https://vjmumar.github.io/mern-frontend/#/home"):"Sign Up"===t&&"Successful"===e?n(!1,!1,"Successfully Please Sign In Now!"):"Sign In"===t&&"User Not Found"===e?n(!0,!1,e):"Sign Up"===t&&"Failed"===e&&n(!1,!1,"Failed")}(i,t)})),a.catch((function(e){throw e}))},$=function(){var e=Object(l.a)(r.a.mark((function e(t,n){var a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={postId:t,likeId:K},(s=S.a.post(n,a,{headers:{authorization:"Bearer ".concat(X())}})).then((function(){W()})),s.catch((function(e){throw e}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ee=function(){return!0===D&&!1===U?Object(h.jsx)(g,{handleSignIn:ae,handleUserChange:te,handlePasswordChange:ne,submitSignIn:se,user:z,password:R}):!1===D&&!1===U?Object(h.jsx)(O,{handleSignUp:oe,handleUserChange:te,handlePasswordChange:ne,submitSignUp:ce,user:z,password:R}):!0===U?Object(h.jsx)("img",{className:"gear",src:d}):void 0},te=function(e){var t=e.target.value;A(t)},ne=function(e){var t=e.target.value;G(t)},ae=function(e){e.preventDefault(),T(!1),ee()},se=function(e){e.preventDefault();Z("https://test-api-node1.herokuapp.com/users/signIn","Sign In"),y(!0),T(!0)},ce=function(e){e.preventDefault();Z("https://test-api-node1.herokuapp.com/users/signUp","Sign Up"),y(!0),T(!1)},oe=function(e){e.preventDefault(),T(!0),ee()};return Object(h.jsx)(x.a,{children:Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)(v.d,{children:[Object(h.jsx)(v.b,{exact:!0,path:"/",children:Object(h.jsx)("div",{className:"logIn_wrapper",children:ee()})}),Object(h.jsx)(v.b,{exact:!0,path:"/home",children:"true"===e?Object(h.jsxs)("div",{className:"home_wrapper",children:[Object(h.jsxs)("div",{className:"userDetails",children:[Object(h.jsx)("h1",{className:"username",children:Q}),Object(h.jsx)("button",{onClick:function(){localStorage.removeItem("isLogIn"),localStorage.removeItem("myId"),localStorage.removeItem("token"),localStorage.removeItem("myName"),W()},className:"logOut",children:"Log Out"})]}),Object(h.jsx)(p,{handleInputChange:function(e){var t=e.target.value;b(t)},handleSubmitInput:function(e){e.preventDefault(),function(){var e={text:j,userId:K},t=S.a.post("https://test-api-node1.herokuapp.com/post",e,{headers:{authorization:"Bearer ".concat(X())}});t.then((function(){W()})),t.catch((function(e){throw e}))}()},inputState:j}),Object(h.jsx)(f,{handleLikes:function(e){!function(e){var t=e.likes.find((function(e){return e===K})),n=e._id;$(n,t?"https://test-api-node1.herokuapp.com/post/likes/dec":"https://test-api-node1.herokuapp.com/post/likes")}(e)},handleRemovePost:function(e){!function(e){var t={postId:e},n=S.a.post("https://test-api-node1.herokuapp.com/post/del",t,{headers:{authorization:"Bearer ".concat(X())}});n.then((function(){W()})),n.catch((function(e){throw e}))}(e)},handleCommentChange:function(e){q(e.target.value)},handleCommentSubmit:function(e){e.preventDefault(),function(){var e={name:Q,postId:s,comment:Y},t=S.a.post("https://test-api-node1.herokuapp.com/post/comments",e,{headers:{authorization:"Bearer ".concat(X())}});t.then((function(e){W()})),t.catch((function(e){throw e}))}()},getPostId:function(e){c(e)},handleDeleteComment:function(e,t){!function(e,t){var n={postId:t,commentId:e},a=S.a.post("https://test-api-node1.herokuapp.com/post/comments/del",n);a.then((function(){W()})),a.catch((function(e){throw e}))}(e,t)},handleFilter:function(e){var t=e.target.value,n=Object(u.a)(N);if("yourPost"===t){var a=n[0].filter((function(e){return e._id===K}));_(n=[a])}else _(N.splice(0,N.length)),V()},data:N,postId:s,commentInput:Y})]}):Object(h.jsx)(v.a,{to:"/"})})]})})})};o.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(C,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.f2562b7d.chunk.js.map