(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(29),o=n.n(c),i=n(16),r=n.n(i),l=n(30),u=n(19),m=n(7),d=n(31),h=(n(39),n.p+"static/media/Gear-0.2s-200px.b8fbe4a5.gif"),p=(n(40),n(0)),j=function(e){var t=e.inputState,n=e.handleInputChange,a=e.handleSubmitInput;return Object(p.jsx)("div",{children:Object(p.jsxs)("form",{className:"form_form",onSubmit:a,children:[Object(p.jsx)("h1",{className:"form_text",children:"Post"}),Object(p.jsx)("input",{className:"form_input",type:"text",placeholder:"Post",value:t,onChange:n}),Object(p.jsx)("button",{className:"form_submit",onClick:a,children:"Submit"})]})})},b=(n(42),function(e){var t=e.commentInput,n=e.handleCommentChange,a=e.commentsArray,s=e.handleCommentSubmit,c=e.handleDeleteComment,o=e.postId,i=localStorage.getItem("myId"),r=function(e,t){if(e===i)return Object(p.jsx)("button",{onClick:c.bind(undefined,t,o),className:"comment_delete",children:"Delete"})};return Object(p.jsx)("div",{className:"comment_wrapper",children:Object(p.jsxs)("div",{className:"comment_box",children:[Object(p.jsx)("div",{className:"comment_comments",children:Object(p.jsx)("ul",{children:a.map((function(e,t){return Object(p.jsxs)("li",{className:"comment_list",children:[r(e.belongsTo,e._id),Object(p.jsx)("h4",{className:"comment_name",children:e.name}),Object(p.jsx)("p",{className:"comment_text",children:e.text})]},t)}))})}),Object(p.jsx)("div",{className:"comment_form",children:Object(p.jsxs)("form",{children:[Object(p.jsx)("input",{type:"text",placeholder:"Type Comment Here",value:t,onChange:n}),Object(p.jsx)("button",{onClick:s,className:"comment_submit",children:"Comment"})]})})]})})}),f=(n(43),void 0),g=function(e){var t=e.data,n=e.handleLikes,s=e.handleRemovePost,c=e.getPostId,o=e.postId,i=e.handleFilter,r=e.commentInput,l=e.handleCommentChange,u=e.handleCommentSubmit,d=e.handleDeleteComment,h=localStorage.getItem("myId"),j=Object(a.useState)(""),g=Object(m.a)(j,2),O=g[0],x=g[1],v=Object(a.useState)([]),I=Object(m.a)(v,2),S=I[0],C=I[1],N=function(e,t,a){var s;return s=void 0!==e.find((function(e){return e===h}))?"UnLike":"Like",Object(p.jsxs)("button",{onClick:n.bind(f,t,a),className:"list_postLike",children:[s," ",e.length]})},_=function(e){if(e.belongsTo===h)return Object(p.jsx)("button",{onClick:s.bind(f,e._id),className:"list_removePost",children:"Delete"})},k=function(e){c(e._id),x(e._id),C(S.splice(0,S.length)),C(S.concat(e.comments))},w=function(e){if(e._id===O)return Object(p.jsx)(b,{handleCommentChange:l,handleCommentSubmit:u,handleDeleteComment:d,postId:o,commentInput:r,commentsArray:S})};return Object(p.jsxs)("div",{className:"list_wrapper",children:[Object(p.jsx)("div",{className:"list_filter",children:Object(p.jsxs)("select",{onChange:i,children:[Object(p.jsx)("option",{value:"allPost",children:"All Post"}),Object(p.jsx)("option",{value:"yourPost",children:"Your Post"})]})}),Object(p.jsx)("ul",{className:"list_ul",children:t.map((function(e,t){return e.map((function(e){return e.Post.map((function(t){return Object(p.jsx)("li",{className:"list_li",children:Object(p.jsxs)("div",{className:"list_item",children:[_(t),Object(p.jsx)("h3",{className:"list_postName",children:e.Username}),Object(p.jsx)("p",{className:"list_postText",children:t.text}),N(t.likes,t,e),Object(p.jsx)("p",{onClick:k.bind(f,t),className:"list_commentLabel",children:"Comments"}),w(t)]})},t._id)}))}))}))})]})},O=(n(44),function(e){var t=e.handleSignIn,n=e.handleUserChange,a=e.handlePasswordChange,s=e.submitSignIn,c=e.user,o=e.password;return Object(p.jsx)("div",{children:Object(p.jsxs)("form",{className:"signIn_form",children:[Object(p.jsx)("h2",{className:"signIn_text",children:"Sign In"}),Object(p.jsx)("input",{className:"signIn_userInput",onChange:n,value:c,type:"text",placeholder:"Username"}),Object(p.jsx)("input",{className:"signIn_passwordInput",onChange:a,value:o,type:"password",placeholder:"Password"}),Object(p.jsx)("button",{onClick:s,className:"signIn_submit",children:"Submit"}),Object(p.jsx)("a",{onClick:t,className:"signIn_signUpLabel",children:"SignUp"})]})})}),x=(n(45),function(e){var t=e.handleSignUp,n=e.handleUserChange,a=e.handlePasswordChange,s=e.submitSignUp,c=e.user,o=e.password;return Object(p.jsx)("div",{children:Object(p.jsxs)("form",{className:"signUp_form",children:[Object(p.jsx)("h2",{className:"signUp_text",children:"Sign Up"}),Object(p.jsx)("input",{className:"signUp_userInput",value:c,onChange:n,type:"text",placeholder:"Username"}),Object(p.jsx)("input",{className:"signUp_passwordInput",value:o,onChange:a,type:"password",placeholder:"Password"}),Object(p.jsx)("button",{onClick:s,className:"signUp_submit",children:"Submit"}),Object(p.jsx)("a",{onClick:t,className:"signUp_signUpLabel",children:"SignIn"})]})})}),v=n(32),I=n(2),S=n(9),C=n.n(S);var N=function(){var e=localStorage.getItem("isLogIn"),t=Object(a.useState)(""),n=Object(m.a)(t,2),s=n[0],c=n[1],o=Object(a.useState)(""),i=Object(m.a)(o,2),b=i[0],f=i[1],S=Object(a.useState)([]),N=Object(m.a)(S,2),_=N[0],k=N[1],w=Object(a.useState)(!1),U=Object(m.a)(w,2),y=U[0],P=U[1],L=Object(a.useState)(!0),D=Object(m.a)(L,2),T=D[0],B=D[1],F=Object(a.useState)(""),z=Object(m.a)(F,2),A=z[0],E=z[1],J=Object(a.useState)(""),R=Object(m.a)(J,2),G=R[0],H=R[1],M=Object(a.useState)(""),Y=Object(m.a)(M,2),q=Y[0],K=Y[1],Q=localStorage.getItem("myId"),V=localStorage.getItem("myName");Object(a.useEffect)((function(){W()}),[]);var W=function(){var e=C.a.get("https://test-api-node1.herokuapp.com/users");e.then((function(e){var t=Object(u.a)(_);t.push(e.data),k(t)})),e.catch((function(e){throw e}))},X=function(){location.reload()},Z=function(){return localStorage.getItem("token")},$=function(e,t){var n={Username:A.toLocaleLowerCase(),Password:G.toLocaleLowerCase()},a=C.a.post(e,n);a.then((function(n){var a,s,c=n.data,o=c.Token,i=c.Status,r=c.myUsername;!function(e){localStorage.setItem("token",e)}(o),function(e,t){-1!==e.indexOf("signIn")&&"Successful"===t?localStorage.setItem("isLogIn",!0):localStorage.setItem("isLogIn",!1)}(e,i),a=c.myId,localStorage.setItem("myId",a),s=r,localStorage.setItem("myName",s),function(e,t){var n=function(e,n,a){setTimeout((function(){P(n),B(e)}),1e3),setTimeout((function(){alert("".concat(t," ").concat(a))}),1500)};"Sign In"===t&&"Successful"===e?(P(!1),location.href="https://vjmumar.github.io/mern-frontend/#/home"):"Sign Up"===t&&"Successful"===e?n(!1,!1,"Successfully Please Sign In Now!"):"Sign In"===t&&"User Not Found"===e?n(!0,!1,e):"Sign Up"===t&&"Failed"===e&&n(!1,!1,"Failed")}(i,t)})),a.catch((function(e){throw e}))},ee=function(){var e=Object(l.a)(r.a.mark((function e(t,n){var a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={postId:t,likeId:Q},(s=C.a.post(n,a,{headers:{authorization:"Bearer ".concat(Z())}})).then((function(){X()})),s.catch((function(e){throw e}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),te=function(){return!0===T&&!1===y?Object(p.jsx)(O,{handleSignIn:se,handleUserChange:ne,handlePasswordChange:ae,submitSignIn:ce,user:A,password:G}):!1===T&&!1===y?Object(p.jsx)(x,{handleSignUp:ie,handleUserChange:ne,handlePasswordChange:ae,submitSignUp:oe,user:A,password:G}):!0===y?Object(p.jsx)("img",{className:"gear",src:h}):void 0},ne=function(e){var t=e.target.value;E(t)},ae=function(e){var t=e.target.value;H(t)},se=function(e){e.preventDefault(),B(!1),te()},ce=function(e){e.preventDefault();$("https://test-api-node1.herokuapp.com/users/signIn","Sign In"),P(!0),B(!0)},oe=function(e){e.preventDefault();$("https://test-api-node1.herokuapp.com/users/signUp","Sign Up"),P(!0),B(!1)},ie=function(e){e.preventDefault(),B(!0),te()};return Object(p.jsx)(v.a,{children:Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)(I.d,{children:[Object(p.jsx)(I.b,{exact:!0,path:"/",children:Object(p.jsx)("div",{className:"logIn_wrapper",children:te()})}),Object(p.jsx)(I.b,{exact:!0,path:"/home",children:"true"===e?Object(p.jsxs)("div",{className:"home_wrapper",children:[Object(p.jsxs)("div",{className:"userDetails",children:[Object(p.jsx)("h1",{className:"username",children:V}),Object(p.jsx)("button",{onClick:function(){localStorage.removeItem("isLogIn"),localStorage.removeItem("myId"),localStorage.removeItem("token"),localStorage.removeItem("myName"),X()},className:"logOut",children:"Log Out"})]}),Object(p.jsx)(j,{handleInputChange:function(e){var t=e.target.value;f(t)},handleSubmitInput:function(e){e.preventDefault(),function(){var e={text:b,userId:Q},t=C.a.post("https://test-api-node1.herokuapp.com/post",e,{headers:{authorization:"Bearer ".concat(Z())}});t.then((function(){X()})),t.catch((function(e){throw e}))}()},inputState:b}),Object(p.jsx)(g,{handleLikes:function(e){!function(e){var t=e.likes.find((function(e){return e===Q})),n=e._id;ee(n,t?"https://test-api-node1.herokuapp.com/post/likes/dec":"https://test-api-node1.herokuapp.com/post/likes")}(e)},handleRemovePost:function(e){!function(e){var t={postId:e},n=C.a.post("https://test-api-node1.herokuapp.com/post/del",t,{headers:{authorization:"Bearer ".concat(Z())}});n.then((function(){X()})),n.catch((function(e){throw e}))}(e)},handleCommentChange:function(e){K(e.target.value)},handleCommentSubmit:function(e){e.preventDefault(),function(){var e={name:V,postId:s,comment:q},t=C.a.post("https://test-api-node1.herokuapp.com/post/comments",e,{headers:{authorization:"Bearer ".concat(Z())}});t.then((function(e){X()})),t.catch((function(e){throw e}))}()},getPostId:function(e){c(e)},handleDeleteComment:function(e,t){!function(e,t){var n={postId:t,commentId:e},a=C.a.post("https://test-api-node1.herokuapp.com/post/comments/del",n);a.then((function(){X()})),a.catch((function(e){throw e}))}(e,t)},handleFilter:function(e){var t=e.target.value,n=Object(u.a)(_);if("yourPost"===t){var a=n[0].filter((function(e){return e._id===Q}));k(n=[a])}else k(Object(d.a)("data")),W()},data:_,postId:s,commentInput:q})]}):Object(p.jsx)(I.a,{to:"/"})})]})})})};o.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(N,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.8c44d4f5.chunk.js.map