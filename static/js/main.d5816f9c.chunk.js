(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{39:function(e,t,n){},61:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(15),o=n.n(c),s=n(19),i=n.n(s),r=n(30),l=n(10),u=(n(39),n(4)),d=n(11),m=n.n(d),h="GET_ID",p="GET_NAME",j="GET_DATA",f="FILTER_DATA_TYPE",b="COMMENTS_DATA_TYPE",g="IS_LOADING_TYPE",O="IS_UPDATE_TYPE",v=function(e){return{type:g,payload:e}},_=localStorage.getItem("myId"),I=function(e){return{type:j,payload:e}},x=function(){return function(e){e(v(!0));var t=m.a.get("https://test-api-node1.herokuapp.com/users");t.then((function(t){for(var n=0;n<t.data.length;n++)delete t.data[n].Password;var a;e((a=function(e){return[e.find((function(e){return e._id===_}))]}(t.data),{type:f,payload:a})),e(I(t.data)),e({type:h}),e({type:p}),e(v(!1))})),t.catch((function(e){throw e}))}},S=function(e){return{type:b,payload:e}},C=n.p+"static/media/Gear-0.2s-200px.b8fbe4a5.gif",N=function(e){return{type:O,payload:e}},E=(n(61),n(1)),y=function(e){var t=e.inputState,n=e.handleInputChange,a=e.handleSubmitInput,c=e.handleFileChange,o=Object(u.b)(),s=Object(u.c)((function(e){return e.IS_UPDATE_REDUCER}));return Object(E.jsx)("div",{class:"form_wrapper",children:Object(E.jsxs)("form",{className:"form_form",onSubmit:a,children:[Object(E.jsx)("h1",{className:"form_text",children:"Post"}),!1===s?Object(E.jsx)("input",{type:"file",className:"form_input_file",placeholder:"Choose Image",onChange:c}):"",Object(E.jsx)("input",{className:"form_input",type:"text",placeholder:"Post",value:t,onChange:n}),Object(E.jsx)("button",{className:"form_submit",onClick:a,children:"Submit"}),!0===s?Object(E.jsx)("button",{onClick:function(){o(N(!1))},className:"form_cancel",children:"Cancel"}):""]})})},U=(n(63),function(e){var t=e.commentInput,n=e.handleCommentChange,a=e.handleCommentSubmit,c=e.handleDeleteComment,o=e.postId,s=localStorage.getItem("myId"),i=Object(u.c)((function(e){return e.GET_COMMENTS_REDUCER})),r=function(e,t){if(e===s)return Object(E.jsx)("button",{onClick:c.bind(undefined,t,o),className:"comment_delete",children:"Delete"})};return Object(E.jsx)("div",{className:"comment_wrapper",children:Object(E.jsxs)("div",{className:"comment_box",children:[Object(E.jsx)("div",{className:"comment_comments",children:Object(E.jsx)("ul",{children:i.map((function(e,t){return Object(E.jsxs)("li",{className:"comment_list",children:[r(e.belongsTo,e._id),Object(E.jsx)("h4",{className:"comment_name",children:e.name}),Object(E.jsx)("p",{className:"comment_text",children:e.text})]},t)}))})}),Object(E.jsx)("div",{className:"comment_form",children:Object(E.jsxs)("form",{children:[Object(E.jsx)("input",{type:"text",placeholder:"Type Comment Here",value:t,onChange:n}),Object(E.jsx)("button",{onClick:a,className:"comment_submit",children:"Comment"})]})})]})})}),w=(n(64),void 0),D=function(e){var t=e.handleLikes,n=e.handleRemovePost,c=e.getPostId,o=e.postId,s=e.handleFilter,i=e.handleUpdatePost,r=e.commentInput,d=e.handleCommentChange,m=e.handleCommentSubmit,h=e.handleDeleteComment,p=Object(u.b)(),j=Object(u.c)((function(e){return e.GET_USER_ID})),f=Object(u.c)((function(e){return e.GET_DATA_REDUCER})),b=Object(a.useState)(""),g=Object(l.a)(b,2),O=g[0],v=g[1],_=function(e,n,a){var c;return c=void 0!==e.find((function(e){return e===j}))?"UnLike":"Like",Object(E.jsxs)("button",{onClick:t.bind(w,n,a),className:"list_postLike",children:[c," ",e.length]})},I=function(e){if(e.belongsTo===j)return Object(E.jsx)("button",{onClick:i.bind(w,e),className:"list_removePost",children:"Update"})},x=function(e){if(e.belongsTo===j)return Object(E.jsx)("button",{onClick:n.bind(w,e._id,e.cloudinaryId),className:"list_removePost",children:"Delete"})},C=function(e){c(e._id),v(e._id),0!==e.comments.length?p(S(e.comments)):p(S([]))},N=function(e){if(e._id===O)return Object(E.jsx)(U,{handleCommentChange:d,handleCommentSubmit:m,handleDeleteComment:h,postId:o,commentInput:r})};return Object(E.jsxs)("div",{className:"list_wrapper",children:[Object(E.jsx)("div",{className:"list_filter",children:Object(E.jsxs)("select",{onChange:s,children:[Object(E.jsx)("option",{value:"allPost",children:"All Post"}),Object(E.jsx)("option",{value:"yourPost",children:"Your Post"})]})}),Object(E.jsx)("ul",{className:"list_ul",children:f.map((function(e,t){return e.Post.map((function(t){return Object(E.jsx)("li",{className:"list_li",children:Object(E.jsxs)("div",{className:"list_item",children:[x(t),I(t),Object(E.jsx)("h3",{className:"list_postName",children:e.Username}),"none"!==t.postImg?Object(E.jsx)("img",{className:"list_image",src:t.postImg}):"",Object(E.jsx)("p",{className:"list_postText",children:t.text}),_(t.likes,t,e),Object(E.jsxs)("p",{onClick:C.bind(w,t),className:"list_commentLabel",children:["Comments ",t.comments.length]}),N(t)]})},t._id)}))}))})]})},T=(n(65),function(e){var t=e.handleSignIn,n=e.handleUserChange,a=e.handlePasswordChange,c=e.submitSignIn,o=e.user,s=e.password;return Object(E.jsx)("div",{children:Object(E.jsxs)("form",{className:"signIn_form",children:[Object(E.jsx)("h2",{className:"signIn_text",children:"Sign In"}),Object(E.jsx)("input",{className:"signIn_userInput",onChange:n,value:o,type:"text",placeholder:"Username"}),Object(E.jsx)("input",{className:"signIn_passwordInput",onChange:a,value:s,type:"password",placeholder:"Password"}),Object(E.jsx)("button",{onClick:c,className:"signIn_submit",children:"Submit"}),Object(E.jsx)("a",{onClick:t,className:"signIn_signUpLabel",children:"SignUp"})]})})}),k=(n(66),function(e){var t=e.handleSignUp,n=e.handleUserChange,a=e.handlePasswordChange,c=e.submitSignUp,o=e.user,s=e.password;return Object(E.jsx)("div",{children:Object(E.jsxs)("form",{className:"signUp_form",children:[Object(E.jsx)("h2",{className:"signUp_text",children:"Sign Up"}),Object(E.jsx)("input",{className:"signUp_userInput",value:o,onChange:n,type:"text",placeholder:"Username"}),Object(E.jsx)("input",{className:"signUp_passwordInput",value:s,onChange:a,type:"password",placeholder:"Password"}),Object(E.jsx)("button",{onClick:c,className:"signUp_submit",children:"Submit"}),Object(E.jsx)("a",{onClick:t,className:"signUp_signUpLabel",children:"SignIn"})]})})}),R=n(31),P=n(3);var A=function(){var e=Object(u.c)((function(e){return e.GET_USER_ID})),t=Object(u.c)((function(e){return e.GET_NAME_REDUCER})),n=Object(u.c)((function(e){return e.FILTER_DATA_REDUCER})),c=Object(u.c)((function(e){return e.IS_LOADING_REDUCER})),o=Object(u.c)((function(e){return e.IS_UPDATE_REDUCER})),s=localStorage.getItem("isLogIn"),d=Object(u.b)(),h=Object(a.useState)(""),p=Object(l.a)(h,2),j=p[0],f=p[1],b=Object(a.useState)(""),g=Object(l.a)(b,2),O=g[0],v=g[1],_=Object(a.useState)(!1),U=Object(l.a)(_,2),w=U[0],A=U[1],L=Object(a.useState)(!0),G=Object(l.a)(L,2),F=G[0],M=G[1],B=Object(a.useState)(""),z=Object(l.a)(B,2),Y=z[0],J=z[1],H=Object(a.useState)(""),W=Object(l.a)(H,2),q=W[0],K=W[1],Q=Object(a.useState)(""),V=Object(l.a)(Q,2),X=V[0],Z=V[1],$=Object(a.useState)(),ee=Object(l.a)($,2),te=ee[0],ne=ee[1];Object(a.useEffect)((function(){d(x())}),[]);var ae=function(){return localStorage.getItem("token")},ce=function(e,t){var n={Username:Y.toLocaleLowerCase(),Password:q.toLocaleLowerCase()},a=m.a.post(e,n);a.then((function(n){var a,c,o=n.data,s=o.Token,i=o.Status,r=o.myUsername;!function(e){localStorage.setItem("token",e)}(s),function(e,t){-1!==e.indexOf("signIn")&&"Successful"===t?localStorage.setItem("isLogIn",!0):localStorage.setItem("isLogIn",!1)}(e,i),a=o.myId,localStorage.setItem("myId",a),c=r,localStorage.setItem("myName",c),function(e,t){var n=function(e,n,a){setTimeout((function(){A(n),M(e)}),1e3),setTimeout((function(){alert("".concat(t," ").concat(a))}),1500)};"Sign In"===t&&"Successful"===e?(A(!1),location.href="https://vjmumar.github.io/mern-frontend/#/home"):"Sign Up"===t&&"Successful"===e?n(!1,!1,"Successfully Please Sign In Now!"):"Sign In"===t&&"User Not Found"===e||"Failed"===e?n(!0,!1,e):"Sign Up"===t&&"Failed"===e&&n(!1,!1,"Failed Username is Taken")}(i,t)})),a.catch((function(e){throw e}))},oe=function(){var t=Object(r.a)(i.a.mark((function t(n,a){var c,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c={postId:n,likeId:e},(o=m.a.post(a,c,{headers:{authorization:"Bearer ".concat(ae())}})).then((function(){d(x())})),o.catch((function(e){throw e}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),se=function(){return!0===F&&!1===w?Object(E.jsx)(T,{handleSignIn:le,handleUserChange:ie,handlePasswordChange:re,submitSignIn:ue,user:Y,password:q}):!1===F&&!1===w?Object(E.jsx)(k,{handleSignUp:me,handleUserChange:ie,handlePasswordChange:re,submitSignUp:de,user:Y,password:q}):!0===w?Object(E.jsx)("img",{className:"gear",src:C}):void 0},ie=function(e){var t=e.target.value;J(t)},re=function(e){var t=e.target.value;K(t)},le=function(e){e.preventDefault(),M(!1),se()},ue=function(e){e.preventDefault();ce("https://test-api-node1.herokuapp.com/users/signIn","Sign In"),A(!0),M(!0)},de=function(e){e.preventDefault();Y.length<4?alert("Minimum UserName Length is 4"):-1!==Y.indexOf(" ")?alert("Please Remove Spaces from your Username"):(ce("https://test-api-node1.herokuapp.com/users/signUp","Sign Up"),A(!0),M(!1))},me=function(e){e.preventDefault(),M(!0),se()},he=function(){localStorage.removeItem("isLogIn"),localStorage.removeItem("myId"),localStorage.removeItem("token"),localStorage.removeItem("myName"),location.reload()};return Object(E.jsx)(R.a,{children:Object(E.jsx)("div",{className:"App",children:Object(E.jsxs)(P.d,{children:[Object(E.jsx)(P.b,{exact:!0,path:"/",children:Object(E.jsx)("div",{className:"logIn_wrapper",children:se()})}),Object(E.jsx)(P.b,{exact:!0,path:"/home",children:"true"===s?Object(E.jsxs)("div",{className:"home_wrapper",children:[Object(E.jsxs)("div",{className:"userDetails",children:[Object(E.jsx)("h1",{className:"username",children:t}),Object(E.jsx)("button",{onClick:function(){he()},className:"logOut",children:"Log Out"})]}),Object(E.jsx)(y,{handleInputChange:function(e){var t=e.target.value;v(t)},handleSubmitInput:function(t){t.preventDefault(),ne(""),v(""),!0===o?function(){var e={postId:j,text:O},t=m.a.post("https://test-api-node1.herokuapp.com/post/update",e,{headers:{authorization:"Bearer ".concat(ae())}});t.then((function(){d(x()),d(N(!1))})),t.catch((function(e){throw e}))}():function(){var t=new FormData;t.append("images",te),t.append("text",O),t.append("userId",e);var n=m.a.post("https://test-api-node1.herokuapp.com/post",t,{headers:{authorization:"Bearer ".concat(ae())}});n.then((function(e){d(x()),console.log(e)})),n.catch((function(e){alert("File Not Supported or File Is Too Big!")}))}()},handleFileChange:function(e){var t=e.target.files[0];ne(t)},inputState:O}),Object(E.jsx)("div",{style:{display:!0===c?"none":"block",width:"100%"},children:Object(E.jsx)(D,{handleLikes:function(t){!function(t){var n=t.likes.find((function(t){return t===e})),a=t._id;oe(a,n?"https://test-api-node1.herokuapp.com/post/likes/dec":"https://test-api-node1.herokuapp.com/post/likes")}(t)},handleRemovePost:function(e,t){!function(e,t){var n={postId:e,cloudinaryId:t},a=m.a.post("https://test-api-node1.herokuapp.com/post/del",n,{headers:{authorization:"Bearer ".concat(ae())}});a.then((function(){d(x())})),a.catch((function(e){throw e}))}(e,t)},handleCommentChange:function(e){Z(e.target.value)},handleCommentSubmit:function(e){e.preventDefault(),function(){var e={name:t,postId:j,comment:X},n=m.a.post("https://test-api-node1.herokuapp.com/post/comments",e,{headers:{authorization:"Bearer ".concat(ae())}});n.then((function(e){d(x()),e.data.addComment.Post.map((function(e){e._id===j&&d(S(e.comments))}))})),n.catch((function(e){throw e}))}()},getPostId:function(e){f(e)},handleDeleteComment:function(e,t){!function(e,t){var n={postId:t,commentId:e},a=m.a.post("https://test-api-node1.herokuapp.com/post/comments/del",n);a.then((function(e){d(x()),delete e.data.findRemoveComment.Password,e.data.findRemoveComment.Post.map((function(e){e._id===t&&d(S(e.comments))}))})),a.catch((function(e){throw e}))}(e,t)},handleFilter:function(e){var t=e.target.value;d("yourPost"===t?I(n):x())},handleUpdatePost:function(e){v(e.text),f(e._id),d(N(!0))},postId:j,commentInput:X})}),Object(E.jsx)("img",{style:{display:!1===c?"none":"block",margin:"auto"},src:C})]}):Object(E.jsx)(P.a,{to:"/"})})]})})})},L=n(13),G=Object(L.combineReducers)({GET_USER_ID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return localStorage.getItem("myId");default:return e}},GET_NAME_REDUCER:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return localStorage.getItem("myName");default:return e}},GET_DATA_REDUCER:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return t.payload;default:return e}},FILTER_DATA_REDUCER:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return t.payload;default:return e}},GET_COMMENTS_REDUCER:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return t.payload;default:return e}},IS_LOADING_REDUCER:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return t.payload;default:return e}},IS_UPDATE_REDUCER:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return t.payload;default:return e}}}),F=n(32),M=n(33),B=Object(L.createStore)(G,Object(F.composeWithDevTools)(Object(L.applyMiddleware)(M.a)));o.a.render(Object(E.jsx)(u.a,{store:B,children:Object(E.jsx)(A,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.d5816f9c.chunk.js.map