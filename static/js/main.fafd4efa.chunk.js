(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(29),o=n.n(c),i=n(16),r=n.n(i),l=n(30),u=n(19),m=n(8),d=(n(38),n(39),n(0)),h=function(e){var t=e.inputState,n=e.handleInputChange,a=e.handleSubmitInput;return Object(d.jsx)("div",{children:Object(d.jsxs)("form",{className:"form_form",onSubmit:a,children:[Object(d.jsx)("h1",{className:"form_text",children:"Post"}),Object(d.jsx)("input",{className:"form_input",type:"text",placeholder:"Post",value:t,onChange:n}),Object(d.jsx)("button",{className:"form_submit",onClick:a,children:"Submit"})]})})},p=(n(41),function(e){var t=e.commentInput,n=e.handleCommentChange,a=e.commentsArray,s=e.handleCommentSubmit,c=e.handleDeleteComment,o=e.postId,i=localStorage.getItem("myId"),r=function(e,t){if(e===i)return Object(d.jsx)("button",{onClick:c.bind(undefined,t,o),className:"comment_delete",children:"Delete"})};return Object(d.jsx)("div",{className:"comment_wrapper",children:Object(d.jsxs)("div",{className:"comment_box",children:[Object(d.jsx)("div",{className:"comment_comments",children:Object(d.jsx)("ul",{children:a.map((function(e,t){return Object(d.jsxs)("li",{className:"comment_list",children:[r(e.belongsTo,e._id),Object(d.jsx)("h4",{className:"comment_name",children:e.name}),Object(d.jsx)("p",{className:"comment_text",children:e.text})]},t)}))})}),Object(d.jsx)("div",{className:"comment_form",children:Object(d.jsxs)("form",{children:[Object(d.jsx)("input",{type:"text",placeholder:"Type Comment Here",value:t,onChange:n}),Object(d.jsx)("button",{onClick:s,className:"comment_submit",children:"Comment"})]})})]})})}),j=(n(42),void 0),b=function(e){var t=e.data,n=e.handleLikes,s=e.handleRemovePost,c=e.getPostId,o=e.postId,i=e.handleFilter,r=e.commentInput,l=e.handleCommentChange,u=e.handleCommentSubmit,h=e.handleDeleteComment,b=localStorage.getItem("myId"),f=Object(a.useState)(""),g=Object(m.a)(f,2),O=g[0],x=g[1],v=Object(a.useState)([]),I=Object(m.a)(v,2),S=I[0],C=I[1],_=function(e,t,a){var s;return s=void 0!==e.find((function(e){return e===b}))?"UnLike":"Like",Object(d.jsxs)("button",{onClick:n.bind(j,t,a),className:"list_postLike",children:[s," ",e.length]})},N=function(e){if(e.belongsTo===b)return Object(d.jsx)("button",{onClick:s.bind(j,e._id),className:"list_removePost",children:"Delete"})},k=function(e){c(e._id),x(e._id),C(S.splice(0,S.length)),C(S.concat(e.comments))},w=function(e){if(e._id===O)return Object(d.jsx)(p,{handleCommentChange:l,handleCommentSubmit:u,handleDeleteComment:h,postId:o,commentInput:r,commentsArray:S})};return Object(d.jsxs)("div",{className:"list_wrapper",children:[Object(d.jsx)("div",{className:"list_filter",children:Object(d.jsxs)("select",{onChange:i,children:[Object(d.jsx)("option",{value:"allPost",children:"All Post"}),Object(d.jsx)("option",{value:"yourPost",children:"Your Post"})]})}),Object(d.jsx)("ul",{className:"list_ul",children:t.map((function(e,t){return e.map((function(e){return e.Post.map((function(t){return Object(d.jsx)("li",{className:"list_li",children:Object(d.jsxs)("div",{className:"list_item",children:[N(t),Object(d.jsx)("h3",{className:"list_postName",children:e.Username}),Object(d.jsx)("p",{className:"list_postText",children:t.text}),_(t.likes,t,e),Object(d.jsx)("p",{onClick:k.bind(j,t),className:"list_commentLabel",children:"Comments"}),w(t)]})},t._id)}))}))}))})]})},f=(n(43),function(e){var t=e.handleSignIn,n=e.handleUserChange,a=e.handlePasswordChange,s=e.submitSignIn,c=e.user,o=e.password;return Object(d.jsx)("div",{children:Object(d.jsxs)("form",{className:"signIn_form",children:[Object(d.jsx)("h2",{className:"signIn_text",children:"Sign In"}),Object(d.jsx)("input",{className:"signIn_userInput",onChange:n,value:c,type:"text",placeholder:"Username"}),Object(d.jsx)("input",{className:"signIn_passwordInput",onChange:a,value:o,type:"password",placeholder:"Password"}),Object(d.jsx)("button",{onClick:s,className:"signIn_submit",children:"Submit"}),Object(d.jsx)("a",{onClick:t,className:"signIn_signUpLabel",children:"SignUp"})]})})}),g=(n(44),function(e){var t=e.handleSignUp,n=e.handleUserChange,a=e.handlePasswordChange,s=e.submitSignUp,c=e.user,o=e.password;return Object(d.jsx)("div",{children:Object(d.jsxs)("form",{className:"signUp_form",children:[Object(d.jsx)("h2",{className:"signUp_text",children:"Sign Up"}),Object(d.jsx)("input",{className:"signUp_userInput",value:c,onChange:n,type:"text",placeholder:"Username"}),Object(d.jsx)("input",{className:"signUp_passwordInput",value:o,onChange:a,type:"password",placeholder:"Password"}),Object(d.jsx)("button",{onClick:s,className:"signUp_submit",children:"Submit"}),Object(d.jsx)("a",{onClick:t,className:"signUp_signUpLabel",children:"SignIn"})]})})}),O=n(31),x=n(2),v=n(9),I=n.n(v);var S=function(){var e=localStorage.getItem("isLogIn"),t=Object(a.useState)(""),n=Object(m.a)(t,2),s=n[0],c=n[1],o=Object(a.useState)(""),i=Object(m.a)(o,2),p=i[0],j=i[1],v=Object(a.useState)([]),S=Object(m.a)(v,2),C=S[0],_=S[1],N=Object(a.useState)(!0),k=Object(m.a)(N,2),w=k[0],U=k[1],y=Object(a.useState)(""),P=Object(m.a)(y,2),D=P[0],L=P[1],B=Object(a.useState)(""),T=Object(m.a)(B,2),z=T[0],A=T[1],F=Object(a.useState)(""),E=Object(m.a)(F,2),J=E[0],R=E[1],H=localStorage.getItem("myId"),M=localStorage.getItem("myName");Object(a.useEffect)((function(){Y()}),[]);var Y=function(){var e=I.a.get("https://test-api-node1.herokuapp.com/users");e.then((function(e){var t=Object(u.a)(C);t.push(e.data),_(t)})),e.catch((function(e){throw e}))},q=function(){location.reload()},G=function(){return localStorage.getItem("token")},K=function(e,t){var n={Username:D,Password:z},a=I.a.post(e,n);a.then((function(n){var a,s,c=n.data,o=c.Token,i=c.Status,r=c.myUsername;!function(e){localStorage.setItem("token",e)}(o),function(e,t){-1!==e.indexOf("signIn")&&"Successful"===t?localStorage.setItem("isLogIn",!0):localStorage.setItem("isLogIn",!1)}(e,i),a=c.myId,localStorage.setItem("myId",a),s=r,localStorage.setItem("myName",s),function(e,t){"Sign In"===t&&"Successful"===e?location.href="https://vjmumar.github.io/mern-frontend/#/home":"Sign Up"===t&&"Successful"===e?alert("".concat(t," Successfully")):alert("".concat(t," Failed"))}(i,t)})),a.catch((function(e){throw e}))},Q=function(){var e=Object(l.a)(r.a.mark((function e(t,n){var a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={postId:t,likeId:H},(s=I.a.post(n,a,{headers:{authorization:"Bearer ".concat(G())}})).then((function(){q()})),s.catch((function(e){throw e}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V=function(){return!0===w?Object(d.jsx)(f,{handleSignIn:Z,handleUserChange:W,handlePasswordChange:X,submitSignIn:$,user:D,password:z}):!1===w?Object(d.jsx)(g,{handleSignUp:te,handleUserChange:W,handlePasswordChange:X,submitSignUp:ee,user:D,password:z}):void 0},W=function(e){var t=e.target.value;L(t)},X=function(e){var t=e.target.value;A(t)},Z=function(e){e.preventDefault(),U(!1),V()},$=function(e){e.preventDefault();K("https://test-api-node1.herokuapp.com/users/signIn","Sign In")},ee=function(e){e.preventDefault();K("https://test-api-node1.herokuapp.com/users/signUp","Sign Up")},te=function(e){e.preventDefault(),U(!0),V()};return Object(d.jsx)(O.a,{children:Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("h1",{className:"username",children:M}),Object(d.jsxs)(x.d,{children:[Object(d.jsx)(x.b,{exact:!0,path:"/",children:Object(d.jsx)("div",{className:"logIn_wrapper",children:V()})}),Object(d.jsx)(x.b,{exact:!0,path:"/home",children:"true"===e?Object(d.jsxs)("div",{className:"home_wrapper",children:[Object(d.jsx)(h,{handleInputChange:function(e){var t=e.target.value;j(t)},handleSubmitInput:function(e){e.preventDefault(),function(){var e={text:p,userId:H},t=I.a.post("https://test-api-node1.herokuapp.com/post",e,{headers:{authorization:"Bearer ".concat(G())}});t.then((function(){q()})),t.catch((function(e){throw e}))}()},inputState:p}),Object(d.jsx)(b,{handleLikes:function(e){!function(e){var t=e.likes.find((function(e){return e===H})),n=e._id;Q(n,t?"https://test-api-node1.herokuapp.com/post/likes/dec":"https://test-api-node1.herokuapp.com/post/likes")}(e)},handleRemovePost:function(e){!function(e){var t={postId:e},n=I.a.post("https://test-api-node1.herokuapp.com/post/del",t,{headers:{authorization:"Bearer ".concat(G())}});n.then((function(){q()})),n.catch((function(e){throw e}))}(e)},handleCommentChange:function(e){R(e.target.value)},handleCommentSubmit:function(e){e.preventDefault(),function(){var e={name:M,postId:s,comment:J},t=I.a.post("https://test-api-node1.herokuapp.com/post/comments",e,{headers:{authorization:"Bearer ".concat(G())}});t.then((function(e){q()})),t.catch((function(e){throw e}))}()},getPostId:function(e){c(e)},handleDeleteComment:function(e,t){!function(e,t){var n={postId:t,commentId:e},a=I.a.post("https://test-api-node1.herokuapp.com/post/comments/del",n);a.then((function(){q()})),a.catch((function(e){throw e}))}(e,t)},handleFilter:function(e){var t=e.target.value,n=Object(u.a)(C);if("yourPost"===t){var a=n[0].filter((function(e){return e._id===H}));_(n=[a])}else Y()},data:C,postId:s,commentInput:J})]}):Object(d.jsx)(x.a,{to:"/"})})]})]})})};o.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(S,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.fafd4efa.chunk.js.map