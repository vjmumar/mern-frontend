(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{39:function(e,t,n){},61:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(15),s=n.n(c),o=n(19),i=n.n(o),r=n(30),l=n(9),u=(n(39),n(10)),m=n(11),d=n.n(m),h="GET_ID",p="GET_NAME",j="GET_DATA",b="FILTER_DATA_TYPE",f=localStorage.getItem("myId"),g=function(e){return{type:j,payload:e}},O=function(){return function(e){var t=d.a.get("https://test-api-node1.herokuapp.com/users");t.then((function(t){for(var n=0;n<t.data.length;n++)delete t.data[n].Password;var a;e((a=function(e){return[e.find((function(e){return e._id===f}))]}(t.data),{type:b,payload:a})),e(g(t.data)),e({type:h}),e({type:p})})),t.catch((function(e){throw e}))}},v=n.p+"static/media/Gear-0.2s-200px.b8fbe4a5.gif",x=(n(61),n(1)),I=function(e){var t=e.inputState,n=e.handleInputChange,a=e.handleSubmitInput;return Object(x.jsx)("div",{class:"form_wrapper",children:Object(x.jsxs)("form",{className:"form_form",onSubmit:a,children:[Object(x.jsx)("h1",{className:"form_text",children:"Post"}),Object(x.jsx)("input",{className:"form_input",type:"text",placeholder:"Post",value:t,onChange:n}),Object(x.jsx)("button",{className:"form_submit",onClick:a,children:"Submit"})]})})},_=(n(63),function(e){var t=e.commentInput,n=e.handleCommentChange,a=e.commentsArray,c=e.handleCommentSubmit,s=e.handleDeleteComment,o=e.postId,i=localStorage.getItem("myId"),r=function(e,t){if(e===i)return Object(x.jsx)("button",{onClick:s.bind(undefined,t,o),className:"comment_delete",children:"Delete"})};return Object(x.jsx)("div",{className:"comment_wrapper",children:Object(x.jsxs)("div",{className:"comment_box",children:[Object(x.jsx)("div",{className:"comment_comments",children:Object(x.jsx)("ul",{children:a.map((function(e,t){return Object(x.jsxs)("li",{className:"comment_list",children:[r(e.belongsTo,e._id),Object(x.jsx)("h4",{className:"comment_name",children:e.name}),Object(x.jsx)("p",{className:"comment_text",children:e.text})]},t)}))})}),Object(x.jsx)("div",{className:"comment_form",children:Object(x.jsxs)("form",{children:[Object(x.jsx)("input",{type:"text",placeholder:"Type Comment Here",value:t,onChange:n}),Object(x.jsx)("button",{onClick:c,className:"comment_submit",children:"Comment"})]})})]})})}),S=(n(64),void 0),C=function(e){e.data;var t=e.handleLikes,n=e.handleRemovePost,c=e.getPostId,s=e.postId,o=e.handleFilter,i=e.commentInput,r=e.handleCommentChange,m=e.handleCommentSubmit,d=e.handleDeleteComment,h=Object(u.c)((function(e){return e.GET_USER_ID})),p=Object(u.c)((function(e){return e.GET_DATA_REDUCER})),j=Object(a.useState)(""),b=Object(l.a)(j,2),f=b[0],g=b[1],O=Object(a.useState)([]),v=Object(l.a)(O,2),I=v[0],C=v[1],N=function(e,n,a){var c;return c=void 0!==e.find((function(e){return e===h}))?"UnLike":"Like",Object(x.jsxs)("button",{onClick:t.bind(S,n,a),className:"list_postLike",children:[c," ",e.length]})},w=function(e){if(e.belongsTo===h)return Object(x.jsx)("button",{onClick:n.bind(S,e._id),className:"list_removePost",children:"Delete"})},y=function(e){c(e._id),g(e._id),C(I.splice(0,I.length)),C(I.concat(e.comments))},U=function(e){if(e._id===f)return Object(x.jsx)(_,{handleCommentChange:r,handleCommentSubmit:m,handleDeleteComment:d,postId:s,commentInput:i,commentsArray:I})};return Object(x.jsxs)("div",{className:"list_wrapper",children:[Object(x.jsx)("div",{className:"list_filter",children:Object(x.jsxs)("select",{onChange:o,children:[Object(x.jsx)("option",{value:"allPost",children:"All Post"}),Object(x.jsx)("option",{value:"yourPost",children:"Your Post"})]})}),Object(x.jsx)("ul",{className:"list_ul",children:p.map((function(e,t){return e.Post.map((function(t){return Object(x.jsx)("li",{className:"list_li",children:Object(x.jsxs)("div",{className:"list_item",children:[w(t),Object(x.jsx)("h3",{className:"list_postName",children:e.Username}),Object(x.jsx)("p",{className:"list_postText",children:t.text}),N(t.likes,t,e),Object(x.jsx)("p",{onClick:y.bind(S,t),className:"list_commentLabel",children:"Comments"}),U(t)]})},t._id)}))}))})]})},N=(n(65),function(e){var t=e.handleSignIn,n=e.handleUserChange,a=e.handlePasswordChange,c=e.submitSignIn,s=e.user,o=e.password;return Object(x.jsx)("div",{children:Object(x.jsxs)("form",{className:"signIn_form",children:[Object(x.jsx)("h2",{className:"signIn_text",children:"Sign In"}),Object(x.jsx)("input",{className:"signIn_userInput",onChange:n,value:s,type:"text",placeholder:"Username"}),Object(x.jsx)("input",{className:"signIn_passwordInput",onChange:a,value:o,type:"password",placeholder:"Password"}),Object(x.jsx)("button",{onClick:c,className:"signIn_submit",children:"Submit"}),Object(x.jsx)("a",{onClick:t,className:"signIn_signUpLabel",children:"SignUp"})]})})}),w=(n(66),function(e){var t=e.handleSignUp,n=e.handleUserChange,a=e.handlePasswordChange,c=e.submitSignUp,s=e.user,o=e.password;return Object(x.jsx)("div",{children:Object(x.jsxs)("form",{className:"signUp_form",children:[Object(x.jsx)("h2",{className:"signUp_text",children:"Sign Up"}),Object(x.jsx)("input",{className:"signUp_userInput",value:s,onChange:n,type:"text",placeholder:"Username"}),Object(x.jsx)("input",{className:"signUp_passwordInput",value:o,onChange:a,type:"password",placeholder:"Password"}),Object(x.jsx)("button",{onClick:c,className:"signUp_submit",children:"Submit"}),Object(x.jsx)("a",{onClick:t,className:"signUp_signUpLabel",children:"SignIn"})]})})}),y=n(31),U=n(3);var k=function(){var e=Object(u.c)((function(e){return e.GET_USER_ID})),t=Object(u.c)((function(e){return e.GET_NAME_REDUCER})),n=Object(u.c)((function(e){return e.FILTER_DATA_REDUCER})),c=localStorage.getItem("isLogIn"),s=Object(u.b)(),o=Object(a.useState)(""),m=Object(l.a)(o,2),h=m[0],p=m[1],j=Object(a.useState)(""),b=Object(l.a)(j,2),f=b[0],_=b[1],S=Object(a.useState)(!1),k=Object(l.a)(S,2),E=k[0],D=k[1],T=Object(a.useState)(!0),P=Object(l.a)(T,2),R=P[0],L=P[1],A=Object(a.useState)(""),G=Object(l.a)(A,2),F=G[0],B=G[1],z=Object(a.useState)(""),M=Object(l.a)(z,2),J=M[0],Y=M[1],H=Object(a.useState)(""),W=Object(l.a)(H,2),q=W[0],K=W[1];Object(a.useEffect)((function(){s(O())}),[]);var Q=function(){location.reload()},V=function(){return localStorage.getItem("token")},X=function(e,t){var n={Username:F.toLocaleLowerCase(),Password:J.toLocaleLowerCase()},a=d.a.post(e,n);a.then((function(n){var a,c,s=n.data,o=s.Token,i=s.Status,r=s.myUsername;!function(e){localStorage.setItem("token",e)}(o),function(e,t){-1!==e.indexOf("signIn")&&"Successful"===t?localStorage.setItem("isLogIn",!0):localStorage.setItem("isLogIn",!1)}(e,i),a=s.myId,localStorage.setItem("myId",a),c=r,localStorage.setItem("myName",c),function(e,t){var n=function(e,n,a){setTimeout((function(){D(n),L(e)}),1e3),setTimeout((function(){alert("".concat(t," ").concat(a))}),1500)};"Sign In"===t&&"Successful"===e?(D(!1),location.href="https://vjmumar.github.io/mern-frontend/#/home"):"Sign Up"===t&&"Successful"===e?n(!1,!1,"Successfully Please Sign In Now!"):"Sign In"===t&&"User Not Found"===e||"Failed"===e?n(!0,!1,e):"Sign Up"===t&&"Failed"===e&&n(!1,!1,"Failed Username is Taken")}(i,t)})),a.catch((function(e){throw e}))},Z=function(){var t=Object(r.a)(i.a.mark((function t(n,a){var c,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c={postId:n,likeId:e},(s=d.a.post(a,c,{headers:{authorization:"Bearer ".concat(V())}})).then((function(){Q()})),s.catch((function(e){throw e}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),$=function(){return!0===R&&!1===E?Object(x.jsx)(N,{handleSignIn:ne,handleUserChange:ee,handlePasswordChange:te,submitSignIn:ae,user:F,password:J}):!1===R&&!1===E?Object(x.jsx)(w,{handleSignUp:se,handleUserChange:ee,handlePasswordChange:te,submitSignUp:ce,user:F,password:J}):!0===E?Object(x.jsx)("img",{className:"gear",src:v}):void 0},ee=function(e){var t=e.target.value;B(t)},te=function(e){var t=e.target.value;Y(t)},ne=function(e){e.preventDefault(),L(!1),$()},ae=function(e){e.preventDefault();X("https://test-api-node1.herokuapp.com/users/signIn","Sign In"),D(!0),L(!0)},ce=function(e){e.preventDefault();X("https://test-api-node1.herokuapp.com/users/signUp","Sign Up"),D(!0),L(!1)},se=function(e){e.preventDefault(),L(!0),$()};return Object(x.jsx)(y.a,{children:Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)(U.d,{children:[Object(x.jsx)(U.b,{exact:!0,path:"/",children:Object(x.jsx)("div",{className:"logIn_wrapper",children:$()})}),Object(x.jsx)(U.b,{exact:!0,path:"/home",children:"true"===c?Object(x.jsxs)("div",{className:"home_wrapper",children:[Object(x.jsxs)("div",{className:"userDetails",children:[Object(x.jsx)("h1",{className:"username",children:t}),Object(x.jsx)("button",{onClick:function(){localStorage.removeItem("isLogIn"),localStorage.removeItem("myId"),localStorage.removeItem("token"),localStorage.removeItem("myName"),Q()},className:"logOut",children:"Log Out"})]}),Object(x.jsx)(I,{handleInputChange:function(e){var t=e.target.value;_(t)},handleSubmitInput:function(t){t.preventDefault(),function(){var t={text:f,userId:e},n=d.a.post("https://test-api-node1.herokuapp.com/post",t,{headers:{authorization:"Bearer ".concat(V())}});n.then((function(){Q()})),n.catch((function(e){throw e}))}()},inputState:f}),Object(x.jsx)(C,{handleLikes:function(t){!function(t){var n=t.likes.find((function(t){return t===e})),a=t._id;Z(a,n?"https://test-api-node1.herokuapp.com/post/likes/dec":"https://test-api-node1.herokuapp.com/post/likes")}(t)},handleRemovePost:function(e){!function(e){var t={postId:e},n=d.a.post("https://test-api-node1.herokuapp.com/post/del",t,{headers:{authorization:"Bearer ".concat(V())}});n.then((function(){Q()})),n.catch((function(e){throw e}))}(e)},handleCommentChange:function(e){K(e.target.value)},handleCommentSubmit:function(e){e.preventDefault(),function(){var e={name:t,postId:h,comment:q},n=d.a.post("https://test-api-node1.herokuapp.com/post/comments",e,{headers:{authorization:"Bearer ".concat(V())}});n.then((function(e){Q()})),n.catch((function(e){throw e}))}()},getPostId:function(e){p(e)},handleDeleteComment:function(e,t){!function(e,t){var n={postId:t,commentId:e},a=d.a.post("https://test-api-node1.herokuapp.com/post/comments/del",n);a.then((function(){Q()})),a.catch((function(e){throw e}))}(e,t)},handleFilter:function(e){var t=e.target.value;s("yourPost"===t?g(n):O())},postId:h,commentInput:q})]}):Object(x.jsx)(U.a,{to:"/"})})]})})})},E=n(13),D=Object(E.combineReducers)({GET_USER_ID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return localStorage.getItem("myId");default:return e}},GET_NAME_REDUCER:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return localStorage.getItem("myName");default:return e}},GET_DATA_REDUCER:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return t.payload;default:return e}},FILTER_DATA_REDUCER:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return t.payload;default:return e}}}),T=n(32),P=n(33),R=Object(E.createStore)(D,Object(T.composeWithDevTools)(Object(E.applyMiddleware)(P.a)));s.a.render(Object(x.jsx)(u.a,{store:R,children:Object(x.jsx)(k,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.d208e31b.chunk.js.map